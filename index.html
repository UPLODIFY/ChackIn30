<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CheckIn30 - Daily Engagement Tracker</title>
    <meta name="description" content="Complete daily check-ins for 30 days and earn rewards">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <style>
        /* ===== RESET & BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --light: #f8fafc;
            --dark: #1e293b;
            --gray: #64748b;
            --gray-light: #e2e8f0;
            --border-radius: 12px;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ===== BANNER ADS STYLES ===== */
        .banner-ad {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin: 20px auto;
            overflow: hidden;
            position: relative;
            max-width: 1000px;
            border: 2px solid;
        }

        .banner-content {
            position: relative;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ad-placeholder {
            padding: 20px;
            text-align: center;
            color: var(--gray);
            font-size: 14px;
            width: 100%;
        }

        .close-ad {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--danger);
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        /* Different banner types */
        .banner-1 { border-color: #ff6b6b; background: linear-gradient(135deg, #ff6b6b, #ff8e8e); }
        .banner-2 { border-color: #4ecdc4; background: linear-gradient(135deg, #4ecdc4, #88d3ce); }
        .banner-3 { border-color: #ffd166; background: linear-gradient(135deg, #ffd166, #ffdf8c); }
        .banner-4 { border-color: #06d6a0; background: linear-gradient(135deg, #06d6a0, #45e6bb); }
        .banner-5 { border-color: #118ab2; background: linear-gradient(135deg, #118ab2, #4bb5e6); }
        .banner-6 { border-color: #ef476f; background: linear-gradient(135deg, #ef476f, #f584a0); }
        .banner-7 { border-color: #7209b7; background: linear-gradient(135deg, #7209b7, #9d4edd); }
        .banner-8 { border-color: #f3722c; background: linear-gradient(135deg, #f3722c, #f8965c); }
        .banner-9 { border-color: #277da1; background: linear-gradient(135deg, #277da1, #5aa9d6); }
        .banner-10 { border-color: #90be6d; background: linear-gradient(135deg, #90be6d, #b5d399); }
        
        .native-ad-page {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            z-index: 9999;
            display: flex;
            flex-direction: column;
        }
        
        .native-ad-header {
            background: var(--primary);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
        }
        
        .native-ad-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .native-ad-close {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            color: var(--danger);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            box-shadow: var(--shadow);
        }

        /* ===== VISIT NOTICE ===== */
        .visit-notice {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9998;
        }
        
        .visit-notice-content {
            background: white;
            border-radius: var(--border-radius);
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: var(--shadow-lg);
            animation: modalSlideIn 0.3s ease;
        }
        
        .visit-notice-icon {
            font-size: 4rem;
            color: var(--warning);
            margin-bottom: 20px;
        }
        
        .visit-timer {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary);
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        /* ===== NAVIGATION ===== */
        .navbar {
            background: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .logo i {
            font-size: 1.8rem;
        }

        .nav-links {
            display: flex;
            gap: 25px;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 8px;
            transition: var(--transition);
        }

        .nav-link:hover {
            background: var(--primary);
            color: white;
        }

        .nav-link.active {
            background: var(--primary);
            color: white;
        }

        .nav-link i {
            font-size: 1.1rem;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--dark);
            cursor: pointer;
        }

        /* ===== AUTH PAGES ===== */
        .auth-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .auth-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            padding: 40px;
            width: 100%;
            max-width: 400px;
        }

        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-header h1 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 2rem;
        }

        .auth-header p {
            color: var(--gray);
            font-size: 0.95rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--gray-light);
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--gray-light);
            color: var(--dark);
        }

        .btn-secondary:hover {
            background: #d1d5db;
        }

        .btn-success {
            background: var(--secondary);
            color: white;
        }

        .btn-success:hover {
            background: #0da271;
        }

        .btn-block {
            width: 100%;
        }

        .btn-google {
            background: white;
            color: var(--dark);
            border: 2px solid var(--gray-light);
        }

        .btn-google:hover {
            background: #f8fafc;
            border-color: var(--primary);
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 30px 0;
            color: var(--gray);
        }

        .divider::before,
        .divider::after {
            content: "";
            flex: 1;
            height: 1px;
            background: var(--gray-light);
        }

        .divider span {
            padding: 0 15px;
            font-size: 0.9rem;
        }

        .auth-footer {
            text-align: center;
            margin-top: 30px;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .auth-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        .auth-footer a:hover {
            text-decoration: underline;
        }

        /* ===== DASHBOARD ===== */
        .dashboard-container {
            padding: 30px 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .stat-card i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .stat-card h3 {
            font-size: 2.5rem;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .stat-card p {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .progress-section {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 40px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .progress-bar-container {
            background: var(--gray-light);
            border-radius: 10px;
            height: 12px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-bar {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .reward-status {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 40px;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .status-badge.pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-badge.success {
            background: #d1fae5;
            color: #065f46;
        }

        /* ===== ACTIVITY PAGE ===== */
        .activity-container {
            padding: 30px 20px;
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
        }

        .timer-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 40px 30px;
            box-shadow: var(--shadow-lg);
            margin: 40px 0;
        }

        .timer-display {
            font-size: 4rem;
            font-weight: 700;
            color: var(--primary);
            margin: 30px 0;
            font-family: 'Courier New', monospace;
        }

        .timer-complete {
            color: var(--secondary);
        }

        .timer-progress {
            width: 200px;
            height: 200px;
            margin: 0 auto 30px;
            position: relative;
        }

        .timer-circle {
            width: 100%;
            height: 100%;
        }

        .timer-circle-bg {
            fill: none;
            stroke: var(--gray-light);
            stroke-width: 10;
        }

        .timer-circle-progress {
            fill: none;
            stroke: var(--primary);
            stroke-width: 10;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
            transition: stroke-dashoffset 1s linear;
        }

        .timer-instructions {
            background: #f0f9ff;
            border-left: 4px solid var(--primary);
            padding: 20px;
            border-radius: 8px;
            margin: 30px 0;
            text-align: left;
        }

        .timer-instructions ul {
            padding-left: 20px;
        }

        .timer-instructions li {
            margin-bottom: 10px;
        }

        /* ===== COMPLETION PAGE ===== */
        .completion-container {
            padding: 30px 20px;
            max-width: 500px;
            margin: 0 auto;
            text-align: center;
        }

        .completion-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 40px 30px;
            box-shadow: var(--shadow-lg);
            margin: 40px 0;
        }

        .completion-icon {
            font-size: 5rem;
            color: var(--secondary);
            margin-bottom: 20px;
        }

        .points-earned {
            font-size: 2.5rem;
            color: var(--primary);
            margin: 20px 0;
        }

        /* ===== MODAL POPUP ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            padding: 40px;
            max-width: 500px;
            width: 100%;
            box-shadow: var(--shadow-lg);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .modal-header i {
            font-size: 4rem;
            color: var(--warning);
            margin-bottom: 20px;
        }

        .modal-header h2 {
            color: var(--dark);
            margin-bottom: 10px;
        }

        .modal-body {
            margin-bottom: 30px;
        }

        .modal-footer {
            display: flex;
            gap: 15px;
        }

        .modal-footer .btn {
            flex: 1;
        }

        /* ===== REWARD FORM ===== */
        .reward-form {
            max-width: 500px;
            margin: 0 auto;
        }

        .reward-info {
            background: #f0f9ff;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .reward-info h3 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .disclaimer {
            background: #fef3c7;
            border: 1px solid #fbbf24;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            font-size: 0.9rem;
            color: #92400e;
        }

        /* ===== FOOTER ===== */
        .footer {
            background: var(--dark);
            color: white;
            padding: 40px 20px;
            margin-top: 60px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
        }

        .footer-section h3 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .footer-section p {
            color: #cbd5e1;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .footer-links {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .footer-links a {
            color: #cbd5e1;
            text-decoration: none;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: white;
            text-decoration: underline;
        }

        .footer-bottom {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #374151;
            color: #9ca3af;
            font-size: 0.85rem;
        }

        /* ===== LOADING STATES ===== */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 300px;
            gap: 20px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--gray-light);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* ===== CONNECT BANNER SECTION ===== */
        .connect-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            margin: 40px auto;
            max-width: 600px;
            text-align: center;
        }
        
        .connect-form {
            margin-top: 20px;
        }
        
        .connect-input {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .connect-btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .connect-btn:hover {
            background: #f8fafc;
            transform: translateY(-2px);
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
                position: absolute;
                top: 70px;
                left: 0;
                right: 0;
                background: white;
                flex-direction: column;
                padding: 20px;
                box-shadow: var(--shadow);
                gap: 15px;
            }

            .nav-links.active {
                display: flex;
            }

            .mobile-menu-btn {
                display: block;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .modal-footer {
                flex-direction: column;
            }

            .timer-display {
                font-size: 3rem;
            }

            .timer-progress {
                width: 150px;
                height: 150px;
            }
        }

        /* ===== UTILITY CLASSES ===== */
        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .mt-40 {
            margin-top: 40px;
        }

        .mb-40 {
            margin-bottom: 40px;
        }

        .hidden {
            display: none !important;
        }
        
        /* Initial loading styles */
        #app-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            z-index: 9999;
        }
        
        .loader-logo {
            font-size: 3rem;
            margin-bottom: 20px;
        }
        
        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- Initial Loading Screen -->
    <div id="app-loader">
        <div class="loader-logo">
            <i class="fas fa-calendar-check"></i>
        </div>
        <div class="loader-spinner"></div>
        <h2>CheckIn30</h2>
        <p>Loading application...</p>
    </div>

    <!-- Visit Notice Modal -->
    <div id="visitNotice" class="visit-notice" style="display: none;">
        <div class="visit-notice-content">
            <div class="visit-notice-icon">
                <i class="fas fa-clock"></i>
            </div>
            <h2>ðŸ“¢ Important Notice</h2>
            <p class="mt-20">Please spend <strong>2 minutes</strong> visiting the website before starting the timer.</p>
            <p>This ensures genuine engagement with our platform.</p>
            
            <div class="visit-timer" id="visitTimer">02:00</div>
            
            <p>Timer will start automatically after 2 minutes of website visit.</p>
            <button onclick="startVisitTimer()" class="btn btn-primary mt-20">
                <i class="fas fa-play"></i> Start 2-Minute Visit
            </button>
        </div>
    </div>

    <!-- Main App Container (Hidden Initially) -->
    <div id="app-container" style="display: none;">
        <!-- Top Banner Ad 1 -->
        <div class="banner-ad banner-1" id="banner1">
            <div class="banner-content">
                <div class="ad-placeholder">
                    <!-- Place Adsterra Banner ID 1 Here -->
                    <div id="adsterra-banner-1">
                        <i class="fas fa-ad fa-2x"></i>
                        <p>Top Banner Ad 1</p>
                        <small>Banner ID: ADSTERRA_BANNER_ID_1</small>
                    </div>
                </div>
                <button class="close-ad" onclick="closeBanner('banner1')">âœ•</button>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="navbar">
            <div class="container">
                <div class="nav-container">
                    <a href="#" onclick="showPage('dashboard'); return false;" class="logo">
                        <i class="fas fa-calendar-check"></i>
                        <span>CheckIn30</span>
                    </a>
                    
                    <div class="nav-links" id="navLinks">
                        <a href="#" onclick="showPage('dashboard'); return false;" class="nav-link user-link">
                            <i class="fas fa-home"></i> Dashboard
                        </a>
                        <a href="#" onclick="showPage('activity'); return false;" class="nav-link user-link">
                            <i class="fas fa-running"></i> Daily Activity
                        </a>
                        <a href="#" onclick="showPage('reward'); return false;" class="nav-link user-link">
                            <i class="fas fa-gift"></i> Rewards
                        </a>
                        <a href="#" onclick="logout(); return false;" class="nav-link user-link">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </a>
                        <a href="#" onclick="showPage('login'); return false;" class="nav-link auth-link">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </a>
                    </div>
                    
                    <button class="mobile-menu-btn" onclick="toggleMenu()">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Top Banner Ad 2 -->
        <div class="banner-ad banner-2" id="banner2">
            <div class="banner-content">
                <div class="ad-placeholder">
                    <!-- Place Adsterra Banner ID 2 Here -->
                    <div id="adsterra-banner-2">
                        <i class="fas fa-ad fa-2x"></i>
                        <p>Top Banner Ad 2</p>
                        <small>Banner ID: ADSTERRA_BANNER_ID_2</small>
                    </div>
                </div>
                <button class="close-ad" onclick="closeBanner('banner2')">âœ•</button>
            </div>
        </div>

        <!-- Main Content -->
        <main id="main-content">
            <div class="container">
                <div id="page-container">
                    <!-- Pages will be loaded here -->
                </div>
            </div>
        </main>

        <!-- Multiple Bottom Banners -->
        <div class="banner-ad banner-3" id="banner3">
            <div class="banner-content">
                <div class="ad-placeholder">
                    <!-- Place Adsterra Banner ID 3 Here -->
                    <div id="adsterra-banner-3">
                        <i class="fas fa-ad fa-2x"></i>
                        <p>Bottom Banner Ad 1</p>
                        <small>Banner ID: ADSTERRA_BANNER_ID_3</small>
                    </div>
                </div>
                <button class="close-ad" onclick="closeBanner('banner3')">âœ•</button>
            </div>
        </div>

        <div class="banner-ad banner-4" id="banner4">
            <div class="banner-content">
                <div class="ad-placeholder">
                    <!-- Place Adsterra Banner ID 4 Here -->
                    <div id="adsterra-banner-4">
                        <i class="fas fa-ad fa-2x"></i>
                        <p>Bottom Banner Ad 2</p>
                        <small>Banner ID: ADSTERRA_BANNER_ID_4</small>
                    </div>
                </div>
                <button class="close-ad" onclick="closeBanner('banner4')">âœ•</button>
            </div>
        </div>

        <div class="banner-ad banner-5" id="banner5">
            <div class="banner-content">
                <div class="ad-placeholder">
                    <!-- Place Adsterra Banner ID 5 Here -->
                    <div id="adsterra-banner-5">
                        <i class="fas fa-ad fa-2x"></i>
                        <p>Bottom Banner Ad 3</p>
                        <small>Banner ID: ADSTERRA_BANNER_ID_5</small>
                    </div>
                </div>
                <button class="close-ad" onclick="closeBanner('banner5')">âœ•</button>
            </div>
        </div>

        <!-- Connect Section -->
        <div class="connect-section" id="connectSection">
            <h2>Connect Your Account</h2>
            <p>Connect your Gmail to sync your activity</p>
            <div class="connect-form">
                <input type="email" id="connectEmail" class="connect-input" placeholder="Enter your Gmail address">
                <button class="connect-btn" onclick="connectGmail()">
                    <i class="fab fa-google"></i> Connect Gmail
                </button>
            </div>
            <p style="font-size: 12px; margin-top: 10px;">We'll never share your email with anyone else.</p>
        </div>

        <!-- More Banners -->
        <div class="banner-ad banner-6" id="banner6">
            <div class="banner-content">
                <div class="ad-placeholder">
                    <!-- Place Adsterra Banner ID 6 Here -->
                    <div id="adsterra-banner-6">
                        <i class="fas fa-ad fa-2x"></i>
                        <p>Footer Banner Ad 1</p>
                        <small>Banner ID: ADSTERRA_BANNER_ID_6</small>
                    </div>
                </div>
                <button class="close-ad" onclick="closeBanner('banner6')">âœ•</button>
            </div>
        </div>

        <div class="banner-ad banner-7" id="banner7">
            <div class="banner-content">
                <div class="ad-placeholder">
                    <!-- Place Adsterra Banner ID 7 Here -->
                    <div id="adsterra-banner-7">
                        <i class="fas fa-ad fa-2x"></i>
                        <p>Footer Banner Ad 2</p>
                        <small>Banner ID: ADSTERRA_BANNER_ID_7</small>
                    </div>
                </div>
                <button class="close-ad" onclick="closeBanner('banner7')">âœ•</button>
            </div>
        </div>

        <div class="banner-ad banner-8" id="banner8">
            <div class="banner-content">
                <div class="ad-placeholder">
                    <!-- Place Adsterra Banner ID 8 Here -->
                    <div id="adsterra-banner-8">
                        <i class="fas fa-ad fa-2x"></i>
                        <p>Footer Banner Ad 3</p>
                        <small>Banner ID: ADSTERRA_BANNER_ID_8</small>
                    </div>
                </div>
                <button class="close-ad" onclick="closeBanner('banner8')">âœ•</button>
            </div>
        </div>

        <div class="banner-ad banner-9" id="banner9">
            <div class="banner-content">
                <div class="ad-placeholder">
                    <!-- Place Adsterra Banner ID 9 Here -->
                    <div id="adsterra-banner-9">
                        <i class="fas fa-ad fa-2x"></i>
                        <p>Footer Banner Ad 4</p>
                        <small>Banner ID: ADSTERRA_BANNER_ID_9</small>
                    </div>
                </div>
                <button class="close-ad" onclick="closeBanner('banner9')">âœ•</button>
            </div>
        </div>

        <div class="banner-ad banner-10" id="banner10">
            <div class="banner-content">
                <div class="ad-placeholder">
                    <!-- Place Adsterra Banner ID 10 Here -->
                    <div id="adsterra-banner-10">
                        <i class="fas fa-ad fa-2x"></i>
                        <p>Footer Banner Ad 5</p>
                        <small>Banner ID: ADSTERRA_BANNER_ID_10</small>
                    </div>
                </div>
                <button class="close-ad" onclick="closeBanner('banner10')">âœ•</button>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3>CheckIn30</h3>
                        <p>Daily engagement tracking platform</p>
                        <p>Earn rewards by completing daily activities</p>
                    </div>
                    
                    <div class="footer-section">
                        <h3>Quick Links</h3>
                        <div class="footer-links">
                            <a href="#" onclick="showPage('dashboard'); return false;">Dashboard</a>
                            <a href="#" onclick="showPage('activity'); return false;">Daily Activity</a>
                            <a href="#" onclick="showPage('reward'); return false;">Rewards</a>
                        </div>
                    </div>
                    
                    <div class="footer-section">
                        <h3>Legal</h3>
                        <div class="footer-links">
                            <a href="#" onclick="showPage('terms'); return false;">Terms of Service</a>
                            <a href="#" onclick="showPage('privacy'); return false;">Privacy Policy</a>
                            <a href="#" onclick="showPage('disclaimer'); return false;">Disclaimer</a>
                        </div>
                    </div>
                    
                    <div class="footer-section">
                        <h3>Contact</h3>
                        <p>For support or queries:</p>
                        <p>Email: support@checkin30.com</p>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <div class="footer-disclaimer">
                        <p><strong>CheckIn30 is an engagement tracking platform.</strong></p>
                        <p>Rewards are discretionary and not guaranteed income.</p>
                    </div>
                    <p class="mt-20">Â© 2024 CheckIn30. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // ===== CONFIGURATION =====
        const CONFIG = {
            DAILY_POINTS: 10,
            REQUIRED_DAYS: 30,
            TIMER_DURATION: 120, // seconds
            VISIT_DURATION: 120, // 2 minutes for website visit
            REWARD_POPUP_DELAY: 3600000, // 1 hour in milliseconds
            TELEGRAM_BOT_TOKEN: '8367971417:AAGkV30ajQdWKjM-5AQDxYZH19OPHI51HGM',
            TELEGRAM_CHAT_ID: '6225430212',
            ADMIN_EMAIL: 'admin@checkin30.com',
            BANNER_ADS: {
                banner1: 'ADSTERRA_BANNER_ID_1',
                banner2: 'ADSTERRA_BANNER_ID_2',
                banner3: 'ADSTERRA_BANNER_ID_3',
                banner4: 'ADSTERRA_BANNER_ID_4',
                banner5: 'ADSTERRA_BANNER_ID_5',
                banner6: 'ADSTERRA_BANNER_ID_6',
                banner7: 'ADSTERRA_BANNER_ID_7',
                banner8: 'ADSTERRA_BANNER_ID_8',
                banner9: 'ADSTERRA_BANNER_ID_9',
                banner10: 'ADSTERRA_BANNER_ID_10',
                // Additional banners for different pages
                banner11: 'ADSTERRA_BANNER_ID_11',
                banner12: 'ADSTERRA_BANNER_ID_12',
                banner13: 'ADSTERRA_BANNER_ID_13',
                banner14: 'ADSTERRA_BANNER_ID_14',
                banner15: 'ADSTERRA_BANNER_ID_15',
                banner16: 'ADSTERRA_BANNER_ID_16',
                banner17: 'ADSTERRA_BANNER_ID_17',
                banner18: 'ADSTERRA_BANNER_ID_18',
                banner19: 'ADSTERRA_BANNER_ID_19',
                banner20: 'ADSTERRA_BANNER_ID_20',
                banner21: 'ADSTERRA_BANNER_ID_21',
                banner22: 'ADSTERRA_BANNER_ID_22'
            }
        };

        // ===== FIREBASE CONFIGURATION =====
        const firebaseConfig = {
            apiKey: "AIzaSyC4R6An9_5w0pNQpC3JpJzv60qJk7qY8V0",
            authDomain: "checkin30-7b3d5.firebaseapp.com",
            databaseURL: "https://checkin30-7b3d5-default-rtdb.firebaseio.com",
            projectId: "checkin30-7b3d5",
            storageBucket: "checkin30-7b3d5.firebasestorage.app",
            messagingSenderId: "109876543210",
            appId: "1:109876543210:web:abc123def456ghi789jkl"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();

        // ===== GLOBAL VARIABLES =====
        let currentUser = null;
        let userData = null;
        let timerInterval = null;
        let visitTimerInterval = null;
        let remainingTime = CONFIG.TIMER_DURATION;
        let visitRemainingTime = CONFIG.VISIT_DURATION;
        let isTimerRunning = false;
        let isVisitTimerRunning = false;
        let currentPage = 'login';
        let nativeAdShown = false;
        let visitCompleted = false;

        // ===== INITIALIZE APP =====
        document.addEventListener('DOMContentLoaded', () => {
            // Hide loader and show app
            setTimeout(() => {
                document.getElementById('app-loader').style.display = 'none';
                document.getElementById('app-container').style.display = 'block';
                
                // Initialize auth state listener
                initApp();
                loadBanners();
            }, 1500);
        });

        // ===== APP INITIALIZATION =====
        function initApp() {
            auth.onAuthStateChanged((user) => {
                if (user) {
                    currentUser = user;
                    loadUserData();
                    updateNavigation(true);
                    showPage('dashboard');
                    
                    // Check if user needs to complete visit first
                    checkVisitRequirement();
                } else {
                    currentUser = null;
                    userData = null;
                    updateNavigation(false);
                    showPage('login');
                }
            });
        }

        function updateNavigation(isLoggedIn) {
            const authLinks = document.querySelectorAll('.auth-link');
            const userLinks = document.querySelectorAll('.user-link');
            
            if (isLoggedIn) {
                authLinks.forEach(link => link.style.display = 'none');
                userLinks.forEach(link => link.style.display = 'flex');
            } else {
                authLinks.forEach(link => link.style.display = 'flex');
                userLinks.forEach(link => link.style.display = 'none');
            }
        }

        // ===== WEBSITE VISIT REQUIREMENT =====
        function checkVisitRequirement() {
            const today = new Date().toDateString();
            const lastVisitDate = localStorage.getItem('lastVisitDate');
            const visitCompletedToday = localStorage.getItem('visitCompletedToday') === 'true';
            
            // Reset visit completed status if it's a new day
            if (lastVisitDate !== today) {
                localStorage.removeItem('visitCompletedToday');
                visitCompleted = false;
            } else {
                visitCompleted = visitCompletedToday;
            }
            
            // Show visit notice if not completed today
            if (!visitCompleted && currentPage === 'activity') {
                setTimeout(() => {
                    showVisitNotice();
                }, 1000);
            }
        }

        function showVisitNotice() {
            const visitNotice = document.getElementById('visitNotice');
            if (visitNotice) {
                visitNotice.style.display = 'flex';
                document.getElementById('visitTimer').textContent = formatTime(CONFIG.VISIT_DURATION);
            }
        }

        function startVisitTimer() {
            if (isVisitTimerRunning) return;
            
            isVisitTimerRunning = true;
            visitRemainingTime = CONFIG.VISIT_DURATION;
            const visitTimerElement = document.getElementById('visitTimer');
            
            visitTimerInterval = setInterval(() => {
                visitRemainingTime--;
                
                if (visitTimerElement) {
                    visitTimerElement.textContent = formatTime(visitRemainingTime);
                }
                
                // Visit timer complete
                if (visitRemainingTime <= 0) {
                    clearInterval(visitTimerInterval);
                    completeVisit();
                }
            }, 1000);
        }

        function completeVisit() {
            const today = new Date().toDateString();
            localStorage.setItem('lastVisitDate', today);
            localStorage.setItem('visitCompletedToday', 'true');
            visitCompleted = true;
            
            // Hide visit notice
            const visitNotice = document.getElementById('visitNotice');
            if (visitNotice) {
                visitNotice.style.display = 'none';
            }
            
            // Enable start timer button
            const startBtn = document.getElementById('startTimerBtn');
            if (startBtn) {
                startBtn.disabled = false;
                startBtn.innerHTML = '<i class="fas fa-play"></i> Start Timer';
            }
            
            alert('âœ… 2-minute website visit completed! You can now start the activity timer.');
        }

        // ===== BANNER AD SYSTEM =====
        function loadBanners() {
            // Load Adsterra banners for each placeholder
            Object.keys(CONFIG.BANNER_ADS).forEach(bannerId => {
                const bannerElement = document.getElementById(`adsterra-${bannerId}`);
                if (bannerElement) {
                    // In production, replace with actual Adsterra JavaScript code
                    bannerElement.innerHTML = `
                        <div style="padding: 20px; text-align: center;">
                            <i class="fas fa-ad fa-2x" style="color: #666; margin-bottom: 10px;"></i>
                            <p>${bannerId.replace('banner', 'Banner ')}</p>
                            <small style="color: #999;">Ad ID: ${CONFIG.BANNER_ADS[bannerId]}</small>
                        </div>
                    `;
                }
            });
            
            updateBannersForPage();
        }

        function updateBannersForPage() {
            const banners = document.querySelectorAll('.banner-ad');
            
            banners.forEach(banner => {
                if (currentPage === 'login' || currentPage === 'register') {
                    if (banner.id === 'banner1') {
                        banner.style.display = 'block';
                    } else {
                        banner.style.display = 'none';
                    }
                } else {
                    banner.style.display = 'block';
                }
            });
            
            const connectSection = document.getElementById('connectSection');
            if (connectSection) {
                if (currentPage === 'dashboard' && currentUser) {
                    connectSection.style.display = 'block';
                } else {
                    connectSection.style.display = 'none';
                }
            }
        }

        function closeBanner(bannerId) {
            const banner = document.getElementById(bannerId);
            if (banner) {
                banner.style.display = 'none';
                
                // Show notice about 2-minute visit requirement
                if (!visitCompleted && currentPage === 'activity') {
                    setTimeout(() => {
                        showVisitNotice();
                    }, 500);
                }
            }
        }

        function showNativeAdPage() {
            if (nativeAdShown) return;
            
            nativeAdShown = true;
            const nativeAdHTML = `
                <div class="native-ad-page">
                    <div class="native-ad-header">
                        Daily Check-In Complete!
                    </div>
                    <button class="native-ad-close" onclick="closeNativeAd()">âœ•</button>
                    <div class="native-ad-content">
                        <div style="text-align: center; max-width: 400px;">
                            <!-- Native Ad Placeholder -->
                            <div id="adsterra-native-ad" style="background: #f8f9fa; padding: 30px; border-radius: 10px; margin: 20px 0;">
                                <h3>ðŸŽ‰ Congratulations!</h3>
                                <p>You've earned <strong>+${CONFIG.DAILY_POINTS} Points</strong></p>
                                <small>Native Ad ID: ADSTERRA_NATIVE_AD_ID</small>
                            </div>
                            <h2 style="margin: 20px 0; color: var(--primary);">Points Added: ${userData?.points || 0}</h2>
                            <p>Your daily activity has been recorded successfully.</p>
                            <button onclick="closeNativeAdAndRedirect()" class="btn btn-primary" style="margin-top: 20px;">
                                <i class="fas fa-check"></i> Continue to Dashboard
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', nativeAdHTML);
            
            // Load native ad script
            setTimeout(() => {
                const nativeAdElement = document.getElementById('adsterra-native-ad');
                if (nativeAdElement) {
                    // Load actual Adsterra native ad here
                }
            }, 100);
        }

        function closeNativeAd() {
            const nativeAd = document.querySelector('.native-ad-page');
            if (nativeAd) {
                nativeAd.remove();
                nativeAdShown = false;
                showPage('dashboard');
            }
        }

        function closeNativeAdAndRedirect() {
            closeNativeAd();
            showPage('dashboard');
        }

        // ===== PAGE SYSTEM =====
        async function showPage(pageName) {
            currentPage = pageName;
            
            const pageContainer = document.getElementById('page-container');
            pageContainer.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading...</p>
                </div>
            `;
            
            let html = '';
            switch(pageName) {
                case 'login':
                    html = getLoginPage();
                    break;
                case 'dashboard':
                    html = getDashboardPage();
                    break;
                case 'activity':
                    html = getActivityPage();
                    break;
                case 'reward':
                    html = getRewardPage();
                    break;
                case 'terms':
                    html = getTermsPage();
                    break;
                case 'privacy':
                    html = getPrivacyPage();
                    break;
                case 'disclaimer':
                    html = getDisclaimerPage();
                    break;
                default:
                    html = getDashboardPage();
            }
            
            setTimeout(() => {
                pageContainer.innerHTML = html;
                updateBannersForPage();
                initPage(pageName);
            }, 300);
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            const activeLink = document.querySelector(`[onclick*="showPage('${pageName}')"]`);
            if (activeLink) activeLink.classList.add('active');
        }

        // ===== PAGE TEMPLATES =====
        function getLoginPage() {
            return `
                <div class="auth-container">
                    <div class="auth-card">
                        <div class="auth-header">
                            <div class="logo" style="justify-content: center; margin-bottom: 20px;">
                                <i class="fas fa-calendar-check"></i>
                                <span>CheckIn30</span>
                            </div>
                            <h1>Welcome Back</h1>
                            <p>Sign in to continue your daily check-in streak</p>
                        </div>
                        
                        <div id="loginForm">
                            <div class="form-group">
                                <label class="form-label" for="email">Email</label>
                                <input type="email" id="email" class="form-input" placeholder="Enter your email" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="password">Password</label>
                                <input type="password" id="password" class="form-input" placeholder="Enter your password" required>
                            </div>
                            
                            <button onclick="loginWithEmail()" class="btn btn-primary btn-block">
                                <i class="fas fa-sign-in-alt"></i> Sign In
                            </button>
                            
                            <div class="divider">
                                <span>Or continue with</span>
                            </div>
                            
                            <button onclick="loginWithGoogle()" class="btn btn-google btn-block">
                                <i class="fab fa-google"></i> Google
                            </button>
                            
                            <div class="auth-footer">
                                <p>Don't have an account? <a href="#" onclick="showRegisterForm()">Sign up</a></p>
                            </div>
                        </div>
                        
                        <div id="registerForm" style="display: none;">
                            <div class="form-group">
                                <label class="form-label" for="regEmail">Email</label>
                                <input type="email" id="regEmail" class="form-input" placeholder="Enter your email" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="regPassword">Password</label>
                                <input type="password" id="regPassword" class="form-input" placeholder="Create a password (min. 6 characters)" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="confirmPassword">Confirm Password</label>
                                <input type="password" id="confirmPassword" class="form-input" placeholder="Confirm your password" required>
                            </div>
                            
                            <button onclick="registerWithEmail()" class="btn btn-primary btn-block">
                                <i class="fas fa-user-plus"></i> Create Account
                            </button>
                            
                            <div class="auth-footer">
                                <p>Already have an account? <a href="#" onclick="showLoginForm()">Sign in</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function getDashboardPage() {
            const progress = userData ? Math.min((userData.activeDays / CONFIG.REQUIRED_DAYS) * 100, 100) : 0;
            
            return `
                <div class="dashboard-container">
                    <h1 class="mb-20">Dashboard</h1>
                    <p class="text-center mb-40">Track your daily progress and earn rewards</p>
                    
                    <!-- Mid Banner 1 -->
                    <div class="banner-ad banner-2" style="margin: 30px auto;">
                        <div class="banner-content">
                            <div class="ad-placeholder">
                                <div id="adsterra-banner-11">
                                    <i class="fas fa-ad fa-2x"></i>
                                    <p>Dashboard Mid Banner 1</p>
                                    <small>Banner ID: ${CONFIG.BANNER_ADS.banner11}</small>
                                </div>
                            </div>
                            <button class="close-ad" onclick="closeBanner('mid-banner-1')">âœ•</button>
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-coins"></i>
                            <h3>${userData?.points || 0}</h3>
                            <p>Total Points</p>
                        </div>
                        
                        <div class="stat-card">
                            <i class="fas fa-calendar-day"></i>
                            <h3>${userData?.activeDays || 0}/${CONFIG.REQUIRED_DAYS}</h3>
                            <p>Active Days</p>
                        </div>
                        
                        <div class="stat-card">
                            <i class="fas fa-trophy"></i>
                            <h3>${userData?.rewardStatus || 'Not Eligible'}</h3>
                            <p>Reward Status</p>
                        </div>
                    </div>
                    
                    <!-- Mid Banner 2 -->
                    <div class="banner-ad banner-3" style="margin: 30px auto;">
                        <div class="banner-content">
                            <div class="ad-placeholder">
                                <div id="adsterra-banner-12">
                                    <i class="fas fa-ad fa-2x"></i>
                                    <p>Dashboard Mid Banner 2</p>
                                    <small>Banner ID: ${CONFIG.BANNER_ADS.banner12}</small>
                                </div>
                            </div>
                            <button class="close-ad" onclick="closeBanner('mid-banner-2')">âœ•</button>
                        </div>
                    </div>
                    
                    <div class="progress-section">
                        <div class="progress-header">
                            <h2>30-Day Progress</h2>
                            <span class="status-badge ${userData?.rewardRequested ? 'pending' : ''}">
                                <i class="fas ${userData?.rewardRequested ? 'fa-clock' : 'fa-calendar-check'}"></i>
                                ${userData?.rewardRequested ? 'Reward Pending' : 'In Progress'}
                            </span>
                        </div>
                        
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: ${progress}%"></div>
                        </div>
                        
                        <div class="progress-text">
                            <span>Start</span>
                            <span>${Math.round(progress)}% Complete</span>
                            <span>30 Days</span>
                        </div>
                    </div>
                    
                    <!-- Mid Banner 3 -->
                    <div class="banner-ad banner-4" style="margin: 30px auto;">
                        <div class="banner-content">
                            <div class="ad-placeholder">
                                <div id="adsterra-banner-13">
                                    <i class="fas fa-ad fa-2x"></i>
                                    <p>Dashboard Mid Banner 3</p>
                                    <small>Banner ID: ${CONFIG.BANNER_ADS.banner13}</small>
                                </div>
                            </div>
                            <button class="close-ad" onclick="closeBanner('mid-banner-3')">âœ•</button>
                        </div>
                    </div>
                    
                    ${userData?.rewardRequested ? `
                    <div class="reward-status">
                        <h3 class="mb-20">Reward Status</h3>
                        <div class="status-badge ${userData.rewardStatus === 'SUCCESS' ? 'success' : 'pending'}">
                            <i class="fas ${userData.rewardStatus === 'SUCCESS' ? 'fa-check-circle' : 'fa-clock'}"></i>
                            ${userData.rewardStatus || 'PENDING'}
                        </div>
                        <p class="mt-20">Your reward will be sent within 3 working days.</p>
                    </div>
                    ` : ''}
                    
                    <!-- Mid Banner 4 -->
                    <div class="banner-ad banner-5" style="margin: 30px auto;">
                        <div class="banner-content">
                            <div class="ad-placeholder">
                                <div id="adsterra-banner-14">
                                    <i class="fas fa-ad fa-2x"></i>
                                    <p>Dashboard Mid Banner 4</p>
                                    <small>Banner ID: ${CONFIG.BANNER_ADS.banner14}</small>
                                </div>
                            </div>
                            <button class="close-ad" onclick="closeBanner('mid-banner-4')">âœ•</button>
                        </div>
                    </div>
                    
                    <div class="text-center mt-40">
                        <button onclick="showPage('activity')" class="btn btn-primary btn-lg">
                            <i class="fas fa-play-circle"></i> Start Daily Activity
                        </button>
                    </div>
                    
                    <!-- Mid Banner 5 -->
                    <div class="banner-ad banner-6" style="margin: 40px auto;">
                        <div class="banner-content">
                            <div class="ad-placeholder">
                                <div id="adsterra-banner-15">
                                    <i class="fas fa-ad fa-2x"></i>
                                    <p>Dashboard Mid Banner 5</p>
                                    <small>Banner ID: ${CONFIG.BANNER_ADS.banner15}</small>
                                </div>
                            </div>
                            <button class="close-ad" onclick="closeBanner('mid-banner-5')">âœ•</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function getActivityPage() {
            const today = new Date().toDateString();
            const canStartActivity = !userData?.lastActivityDate || userData.lastActivityDate !== today;
            
            return `
                <div class="activity-container">
                    <h1 class="mb-20">Daily Activity</h1>
                    <p class="text-center mb-40">Complete your daily check-in to earn points</p>
                    
                    <!-- Activity Banner 1 -->
                    <div class="banner-ad banner-7" style="margin: 20px auto;">
                        <div class="banner-content">
                            <div class="ad-placeholder">
                                <div id="adsterra-banner-16">
                                    <i class="fas fa-ad fa-2x"></i>
                                    <p>Activity Page Banner 1</p>
                                    <small>Banner ID: ${CONFIG.BANNER_ADS.banner16}</small>
                                </div>
                            </div>
                            <button class="close-ad" onclick="closeBanner('activity-banner-1')">âœ•</button>
                        </div>
                    </div>
                    
                    <div class="timer-card">
                        <h2 class="mb-20">Daily Timer</h2>
                        <p class="mb-20">Stay on this page for 2 minutes to complete today's activity</p>
                        
                        <div class="timer-progress">
                            <svg class="timer-circle" viewBox="0 0 100 100">
                                <circle class="timer-circle-bg" cx="50" cy="50" r="45"></circle>
                                <circle class="timer-circle-progress" cx="50" cy="50" r="45" 
                                        stroke-dasharray="283" 
                                        stroke-dashoffset="${283 - (283 * (remainingTime / CONFIG.TIMER_DURATION))}">
                                </circle>
                            </svg>
                            <div class="timer-display" id="timerDisplay">
                                ${formatTime(remainingTime)}
                            </div>
                        </div>
                        
                        <!-- Activity Banner 2 -->
                        <div class="banner-ad banner-8" style="margin: 20px auto;">
                            <div class="banner-content">
                                <div class="ad-placeholder">
                                    <div id="adsterra-banner-17">
                                        <i class="fas fa-ad fa-2x"></i>
                                        <p>Activity Page Banner 2</p>
                                        <small>Banner ID: ${CONFIG.BANNER_ADS.banner17}</small>
                                    </div>
                                </div>
                                <button class="close-ad" onclick="closeBanner('activity-banner-2')">âœ•</button>
                            </div>
                        </div>
                        
                        <div class="timer-instructions">
                            <h4 class="mb-10">Important Instructions:</h4>
                            <ul>
                                <li><strong>Step 1:</strong> First spend 2 minutes visiting the website (ads, pages)</li>
                                <li><strong>Step 2:</strong> After visit completion, timer will start automatically</li>
                                <li><strong>Step 3:</strong> Stay on this page until timer completes</li>
                                <li><strong>Step 4:</strong> Points will be awarded automatically</li>
                                <li><strong>Step 5:</strong> Only one completion allowed per day</li>
                            </ul>
                        </div>
                        
                        <!-- Activity Banner 3 -->
                        <div class="banner-ad banner-9" style="margin: 20px auto;">
                            <div class="banner-content">
                                <div class="ad-placeholder">
                                    <div id="adsterra-banner-18">
                                        <i class="fas fa-ad fa-2x"></i>
                                        <p>Activity Page Banner 3</p>
                                        <small>Banner ID: ${CONFIG.BANNER_ADS.banner18}</small>
                                    </div>
                                </div>
                                <button class="close-ad" onclick="closeBanner('activity-banner-3')">âœ•</button>
                            </div>
                        </div>
                        
                        <button onclick="${canStartActivity ? 'startActivityProcess()' : 'alert(\'You have already completed today\\'s activity!\')'}" 
                                class="btn btn-primary btn-block" 
                                ${!canStartActivity ? 'disabled' : ''}
                                id="startTimerBtn">
                            <i class="fas ${canStartActivity ? 'fa-play' : 'fa-check'}"></i>
                            ${canStartActivity ? 'Start Activity Process' : 'Already Completed Today'}
                        </button>
                        
                        <div class="mt-20 text-center" style="color: var(--gray); font-size: 0.9rem;">
                            <i class="fas fa-info-circle"></i> You must first visit website for 2 minutes before starting timer
                        </div>
                    </div>
                    
                    <!-- Activity Banner 4 -->
                    <div class="banner-ad banner-10" style="margin: 20px auto;">
                        <div class="banner-content">
                            <div class="ad-placeholder">
                                <div id="adsterra-banner-19">
                                    <i class="fas fa-ad fa-2x"></i>
                                    <p>Activity Page Banner 4</p>
                                    <small>Banner ID: ${CONFIG.BANNER_ADS.banner19}</small>
                                </div>
                            </div>
                            <button class="close-ad" onclick="closeBanner('activity-banner-4')">âœ•</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function getRewardPage() {
            const canRequest = userData?.activeDays >= CONFIG.REQUIRED_DAYS && !userData?.rewardRequested;
            
            return `
                <div class="dashboard-container">
                    <h1 class="mb-20">Reward Request</h1>
                    
                    <!-- Reward Banner 1 -->
                    <div class="banner-ad banner-1" style="margin: 20px auto;">
                        <div class="banner-content">
                            <div class="ad-placeholder">
                                <div id="adsterra-banner-20">
                                    <i class="fas fa-ad fa-2x"></i>
                                    <p>Reward Page Banner 1</p>
                                    <small>Banner ID: ${CONFIG.BANNER_ADS.banner20}</small>
                                </div>
                            </div>
                            <button class="close-ad" onclick="closeBanner('reward-banner-1')">âœ•</button>
                        </div>
                    </div>
                    
                    ${!canRequest ? `
                        <div class="reward-info">
                            <h3>Eligibility Requirements</h3>
                            <p>To request a reward, you need:</p>
                            <ul style="margin-left: 20px; margin-top: 10px;">
                                <li>Complete ${CONFIG.REQUIRED_DAYS} active days</li>
                                <li>Not have a pending reward request</li>
                            </ul>
                            <p class="mt-20">Your progress: ${userData?.activeDays || 0}/${CONFIG.REQUIRED_DAYS} days</p>
                        </div>
                    ` : `
                        <div class="reward-form">
                            <div class="reward-info">
                                <h3>ðŸŽ‰ Congratulations!</h3>
                                <p>You have completed ${CONFIG.REQUIRED_DAYS} days of active participation.</p>
                                <p class="mt-10"><strong>Reward will be sent within 3 working days.</strong></p>
                            </div>
                            
                            <div class="disclaimer">
                                <p><strong>Note:</strong> Submitting a request does not guarantee the top reward.</p>
                                <p class="mt-10">All users may receive a discretionary bonus based on platform earnings.</p>
                            </div>
                            
                            <!-- Reward Banner 2 -->
                            <div class="banner-ad banner-2" style="margin: 20px auto;">
                                <div class="banner-content">
                                    <div class="ad-placeholder">
                                        <div id="adsterra-banner-21">
                                            <i class="fas fa-ad fa-2x"></i>
                                            <p>Reward Page Banner 2</p>
                                            <small>Banner ID: ${CONFIG.BANNER_ADS.banner21}</small>
                                        </div>
                                    </div>
                                    <button class="close-ad" onclick="closeBanner('reward-banner-2')">âœ•</button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="emailField">Email Address</label>
                                <input type="email" id="emailField" class="form-input" value="${userData?.email || ''}" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="upiID">UPI ID</label>
                                <input type="text" id="upiID" class="form-input" placeholder="Enter your UPI ID (e.g., username@upi)" required>
                                <small style="color: var(--gray); margin-top: 5px; display: block;">Enter valid UPI ID to receive reward</small>
                            </div>
                            
                            <!-- Reward Banner 3 -->
                            <div class="banner-ad banner-3" style="margin: 20px auto;">
                                <div class="banner-content">
                                    <div class="ad-placeholder">
                                        <div id="adsterra-banner-22">
                                            <i class="fas fa-ad fa-2x"></i>
                                            <p>Reward Page Banner 3</p>
                                            <small>Banner ID: ${CONFIG.BANNER_ADS.banner22}</small>
                                        </div>
                                    </div>
                                    <button class="close-ad" onclick="closeBanner('reward-banner-3')">âœ•</button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="pointsInfo">Points to be Deducted</label>
                                <input type="text" id="pointsInfo" class="form-input" value="50 points will be deducted" readonly>
                            </div>
                            
                            <button onclick="submitRewardRequest()" class="btn btn-success btn-block mt-20">
                                <i class="fas fa-paper-plane"></i> Submit Reward Request
                            </button>
                        </div>
                    `}
                </div>
            `;
        }

        function getTermsPage() {
            return `
                <div class="dashboard-container">
                    <h1>Terms of Service</h1>
                    <div class="reward-info mt-20">
                        <h3>Last Updated: ${new Date().toLocaleDateString()}</h3>
                        <p>By using CheckIn30, you agree to these terms:</p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Users must complete daily activities honestly</li>
                            <li>One account per user is allowed</li>
                            <li>Rewards are discretionary and not guaranteed</li>
                            <li>We reserve the right to suspend accounts for abuse</li>
                            <li>All decisions regarding rewards are final</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        function getPrivacyPage() {
            return `
                <div class="dashboard-container">
                    <h1>Privacy Policy</h1>
                    <div class="reward-info mt-20">
                        <h3>Data Collection and Usage</h3>
                        <p>We collect and use your data as follows:</p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Email address for account identification</li>
                            <li>Activity data for progress tracking</li>
                            <li>UPI ID for reward distribution (when requested)</li>
                            <li>Data is stored securely in Firebase</li>
                            <li>We don't share your data with third parties</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        function getDisclaimerPage() {
            return `
                <div class="dashboard-container">
                    <h1>Disclaimer</h1>
                    <div class="disclaimer mt-20" style="margin: 0;">
                        <h3>Important Information</h3>
                        <p><strong>CheckIn30 is an engagement tracking platform.</strong></p>
                        <p class="mt-10">Rewards are discretionary and not guaranteed income.</p>
                        <p class="mt-10">The platform is for entertainment and engagement purposes.</p>
                        <p class="mt-10">Participation does not guarantee monetary rewards.</p>
                        <p class="mt-10">All reward decisions are at the discretion of the platform.</p>
                    </div>
                </div>
            `;
        }

        // ===== ACTIVITY PROCESS FUNCTIONS =====
        function startActivityProcess() {
            if (!visitCompleted) {
                showVisitNotice();
                return;
            }
            startTimer();
        }

        function startTimer() {
            if (isTimerRunning) return;
            
            isTimerRunning = true;
            remainingTime = CONFIG.TIMER_DURATION;
            const startBtn = document.getElementById('startTimerBtn');
            if (startBtn) startBtn.disabled = true;
            
            timerInterval = setInterval(() => {
                remainingTime--;
                
                const timerDisplay = document.getElementById('timerDisplay');
                if (timerDisplay) {
                    timerDisplay.textContent = formatTime(remainingTime);
                }
                
                const progressCircle = document.querySelector('.timer-circle-progress');
                if (progressCircle) {
                    const progress = 283 - (283 * (remainingTime / CONFIG.TIMER_DURATION));
                    progressCircle.style.strokeDashoffset = progress;
                }
                
                if (remainingTime <= 0) {
                    clearInterval(timerInterval);
                    completeDailyActivity();
                }
            }, 1000);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        async function completeDailyActivity() {
            const today = new Date().toDateString();
            
            if (userData?.lastActivityDate === today) {
                alert('You have already completed today\'s activity!');
                return;
            }
            
            try {
                const userRef = database.ref('users/' + currentUser.uid);
                const updates = {
                    points: (userData?.points || 0) + CONFIG.DAILY_POINTS,
                    activeDays: (userData?.activeDays || 0) + 1,
                    lastActivityDate: today,
                    updatedAt: Date.now()
                };
                
                await userRef.update(updates);
                
                userData = { ...userData, ...updates };
                
                // Show native ad page
                showNativeAdPage();
                
                setTimeout(checkRewardPopup, 1000);
                
            } catch (error) {
                console.error('Error completing daily activity:', error);
                alert('Error completing activity. Please try again.');
            }
        }

        // ===== REWARD SYSTEM FUNCTIONS =====
        function checkRewardPopup() {
            if (!userData || userData.rewardRequested) return;
            
            if (userData.activeDays >= CONFIG.REQUIRED_DAYS) {
                const lastPopup = localStorage.getItem('rewardPopupShown');
                const now = Date.now();
                
                if (!lastPopup || (now - lastPopup) > CONFIG.REWARD_POPUP_DELAY) {
                    showRewardPopup();
                }
            }
        }

        function showRewardPopup() {
            const popupHTML = `
                <div class="modal-overlay" id="rewardPopup">
                    <div class="modal-content">
                        <div class="modal-header">
                            <i class="fas fa-trophy"></i>
                            <h2>Congratulations! ðŸŽ‰</h2>
                            <p>You have completed ${CONFIG.REQUIRED_DAYS} days!</p>
                        </div>
                        
                        <div class="modal-body">
                            <p><strong>Reward request submit karne par aapka reward 3 din me aapke pass send hoga.</strong></p>
                            <p class="mt-20">50 points will be deducted for the reward request.</p>
                            <div class="disclaimer mt-20">
                                <p>Rewards are discretionary and based on platform earnings.</p>
                            </div>
                        </div>
                        
                        <div class="modal-footer">
                            <button onclick="closeRewardPopup()" class="btn btn-secondary">
                                <i class="fas fa-clock"></i> Later
                            </button>
                            <button onclick="requestReward()" class="btn btn-primary">
                                <i class="fas fa-gift"></i> Request Reward
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', popupHTML);
            localStorage.setItem('rewardPopupShown', Date.now());
        }

        function closeRewardPopup() {
            const popup = document.getElementById('rewardPopup');
            if (popup) popup.remove();
        }

        function requestReward() {
            closeRewardPopup();
            showPage('reward');
        }

        // ===== TELEGRAM NOTIFICATION =====
        async function sendTelegramNotification(message) {
            try {
                const url = `https://api.telegram.org/bot${CONFIG.TELEGRAM_BOT_TOKEN}/sendMessage`;
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: CONFIG.TELEGRAM_CHAT_ID,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });
                
                if (!response.ok) {
                    throw new Error('Telegram API error');
                }
            } catch (error) {
                console.error('Error sending Telegram notification:', error);
            }
        }

        async function submitRewardRequest() {
            const upiID = document.getElementById('upiID')?.value.trim();
            
            if (!upiID) {
                alert('Please enter your UPI ID');
                return;
            }
            
            if (!upiID.includes('@')) {
                alert('Please enter a valid UPI ID (e.g., username@upi)');
                return;
            }
            
            try {
                const userRef = database.ref('users/' + currentUser.uid);
                const updates = {
                    rewardRequested: true,
                    rewardStatus: 'PENDING',
                    upiID: upiID,
                    requestTime: Date.now(),
                    points: Math.max((userData?.points || 0) - 50, 0),
                    updatedAt: Date.now()
                };
                
                await userRef.update(updates);
                
                userData = { ...userData, ...updates };
                
                // Send Telegram notification
                await sendTelegramNotification(
                    `âœ… Reward Request Submitted\n` +
                    `User: ${userData.email}\n` +
                    `Points deducted: 50\n` +
                    `Remaining Points: ${userData.points}\n` +
                    `UPI: ${upiID}\n` +
                    `Active Days: ${userData.activeDays}\n` +
                    `Time: ${new Date().toLocaleString()}`
                );
                
                alert('âœ… Reward request sent. Reward 3 din me aapke pass aayega.');
                showPage('dashboard');
                
            } catch (error) {
                console.error('Error submitting reward request:', error);
                alert('Error submitting request. Please try again.');
            }
        }

        // ===== LOAD USER DATA =====
        async function loadUserData() {
            if (!currentUser) return;
            
            try {
                const userRef = database.ref('users/' + currentUser.uid);
                const snapshot = await userRef.once('value');
                
                if (snapshot.exists()) {
                    userData = snapshot.val();
                } else {
                    userData = {
                        email: currentUser.email,
                        points: 0,
                        activeDays: 0,
                        lastActivityDate: null,
                        rewardRequested: false,
                        rewardStatus: null,
                        upiID: '',
                        requestTime: null,
                        createdAt: Date.now()
                    };
                    await userRef.set(userData);
                }
                
                checkRewardPopup();
            } catch (error) {
                console.error('Error loading user data:', error);
            }
        }

        // ===== AUTH FUNCTIONS =====
        function showLoginForm() {
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
        }

        function showRegisterForm() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
        }

        async function loginWithEmail() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            if (!email || !password) {
                alert('Please enter email and password');
                return;
            }
            
            try {
                await auth.signInWithEmailAndPassword(email, password);
            } catch (error) {
                alert('Login failed: ' + error.message);
            }
        }

        async function registerWithEmail() {
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!email || !password) {
                alert('Please enter email and password');
                return;
            }
            
            if (password.length < 6) {
                alert('Password must be at least 6 characters');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Passwords do not match');
                return;
            }
            
            try {
                await auth.createUserWithEmailAndPassword(email, password);
            } catch (error) {
                alert('Registration failed: ' + error.message);
            }
        }

        async function loginWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            try {
                await auth.signInWithPopup(provider);
            } catch (error) {
                alert('Google login failed: ' + error.message);
            }
        }

        async function logout() {
            try {
                await auth.signOut();
                showPage('login');
            } catch (error) {
                alert('Logout failed: ' + error.message);
            }
        }

        // ===== UTILITY FUNCTIONS =====
        function toggleMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }

        function connectGmail() {
            const email = document.getElementById('connectEmail').value;
            if (email) {
                alert(`Gmail ${email} connected successfully!`);
                // Here you would typically connect to Google API
            } else {
                alert('Please enter your Gmail address');
            }
        }

        function initPage(pageName) {
            if (pageName === 'activity') {
                checkVisitRequirement();
                const today = new Date().toDateString();
                if (userData?.lastActivityDate === today) {
                    const startBtn = document.getElementById('startTimerBtn');
                    if (startBtn) {
                        startBtn.disabled = true;
                        startBtn.innerHTML = '<i class="fas fa-check"></i> Already Completed Today';
                    }
                } else if (!visitCompleted) {
                    const startBtn = document.getElementById('startTimerBtn');
                    if (startBtn) {
                        startBtn.disabled = false;
                        startBtn.innerHTML = '<i class="fas fa-play"></i> Start Activity Process';
                    }
                }
            }
        }
    </script>
</body>
</html>
